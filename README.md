# Mafia Bot

Discord bot for playing Mafia party game.

## Installation/Установка

### :gb:

1. Download files of this repository on your computer/server
2. In the main folder create a file named ``bot.properties`` with the following content:

    ```properties
    token = <Your Discord bot Token>
    guild = <Name of guild (server) where you want to play> 
    adminroles = <Names of roles who can manage bot administrator status separated with spaces>
    ```

3. In the same directory create empty files named ``users.json`` and ``roles.json``
4. Launch the bot using

    ```bash
    python -m pip install discord.py
    python main.py
    ```

### :ru:

1. Скачайте этот репозиторий к себе на компьютер/сервер
2. В основной папке создайте файл ``bot.properties`` со следующим содержимым:

    ```properties
    token = <Токен Discord бота>
    guild = <Название Discord-сервера, где вы хотите играть> 
    adminroles = <Разделенные пробелами названия ролей на сервере, которые могут назначать ведущего>
    ```

3. В той же папке создайте пустые файлы ``users.json`` и ``roles.json``
4. Запустить бота при помощи команд

    ```bash
    python -m pip install discord.py
    python main.py
    ```

## How to use the bot/Как пользоваться ботом

### :gb:

Coming soon.

### :ru:

#### Выбор ведущего

Чтобы выбрать ведущего, необходимо воспользоваться командой ``/set-admin @участник``
Ведущий получит доступ к большинству других команд и сможет распределить роли.
Использовать эту команду могут только участники с ролью, указанной в ``bot.properties``.

#### Настройка ролей

``/add-role  <название роли>`` - Добавляет новую роль
``/add-image <название роли> + приложенное к сообщению фото`` - Добавляет изображение к роли
``/rename <название роли> <новое название>`` - Переименовывает роль
``/delete *<название роли>`` - Удаляет роль
``/set <название роли> <количество>`` - Задает количество игроков с указанной ролью
``/roles`` - Выводит список ролей и количество игроков

#### Регистрация на игру

Для того, чтобы зарегистрироваться на игру необходимо написать боту команду ``/join``, которая добавит вас в список игроков.
Любой желающий может просмотреть список игроков при помощи команды ``/party``.

#### Раздача ролей

Чтобы раздать роли, ведущий должен выполнить команду ``/shuffle``. Каждый игрок получит в личных сообщениях свою роль. Ведущий получит сообщение, где будет сказано, какому игроку какая роль досталась.

#### Процесс игры

Когда начинается игра, то есть после выполнения команды ``/shuffle``, любое сообщение, которое игрок отправляет боту в личные сообщения, будет транслировано всей его команде. После окончания обсуждения команда может выбрать человека/жертву при помощи команды ``/choose <текст, где вы описываете свой выбор>``. Итоговым выбором команды, я предполагаю, можно считать последнее сообщение, отправленное ведущему при помощи этой команды.

#### Окончание игры и очистка

После окончания игры нужно сделать очистку. Ведущему также необходимо использовать команду ``/clear``, она полностью очистит список игроков.
Если вы хотите поиграть в мафию ещё, то эту команду выполнять не нужно. Если кто-то из игроков решил уйти, опять же, можно воспользоваться командой
``/remove @участник @еще участник``
